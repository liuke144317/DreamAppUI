<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>详情</title>
		<link href="https://cdn.bootcdn.net/ajax/libs/video.js/7.9.5/video-js.min.css" rel="stylesheet">
		<script src="https://cdn.bootcdn.net/ajax/libs/video.js/7.9.5/video.min.js"></script>
		<script type="text/javascript" src="//js.cdn.aliyun.dcloud.net.cn/dev/uni-app/uni.webview.0.1.52.js"></script>
		<style type="text/css">
			html,body,.box{
				height: 100%;
				width: 100%;
				padding: 0;
				margin: 0;
			}
			.video-wrap{
				width: 100%!important;
				height: 100%!important;
			}
		</style>
	</head>
	<body>
		<div class="box">
			<div class="video-wrap" id="videoWrapHls"></div>
		</div>
		<script type="text/javascript">
			var href = getQueryVariable()
			var video = document.createElement('video');
			video.id = 'myVideo';
			video.style = 'width:100%;height:100%';
			video.setAttribute(
			  'class',
			  'video-js vjs-default-skin vjs-big-play-centered'
			);
			video.setAttribute('webkit-playsinline', 'true');
			video.setAttribute('playsinline', 'true');
			video.setAttribute('x5-video-player-type', 'h5');
			video.setAttribute('x5-video-player-fullscreen', 'true');
			video.setAttribute('x-webkit-airplay', 'true');
			document.getElementById('videoWrapHls').appendChild(video);
			console.log('videojs', videojs)
			let player_video = videojs('myVideo', {
			  controls: true,
			  autoplay: false,
			  preload: 'auto',
			  sources: [{
				src: href,
				// type: "video/mp4"
				type: href.indexOf('m3u8') !== -1 ? "application/x-mpegURL" : "video/mp4"
			  }]
			})
			function getQueryVariable()
			{
			  let resdata = window.location.href.slice(window.location.href.indexOf('video.html?urlParams=') + 'video.html?urlParams='.length, window.location.href.length)
			  let finaldata = resdata.slice(0, resdata.indexOf('&others='))
			  return(finaldata.replace('m4u9haha', '?'));
			}
		</script>
	</body>
</html>